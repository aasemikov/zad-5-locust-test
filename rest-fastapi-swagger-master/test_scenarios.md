# Сценарии нагрузочного тестирования Glossary API

## Общая информация
- **API**: Glossary API (терминологический глоссарий)
- **Протокол**: REST (HTTP/JSON)
- **Фреймворк тестирования**: Locust 2.20.1
- **Метрики**: RPS, время ответа, p95/p99, количество ошибок

## Сценарии тестирования

### Sanity Check (Проверка работоспособности)
**Цель**: Убедиться, что все эндпоинты работают корректно
**Параметры**:
- Пользователей: 10
- Скорость роста: 1 пользователь/сек
- Длительность: 1 минута
- Ожидаемый RPS: 3-5 запросов/сек
- Допустимые ошибки: 0%

### Рабочая нагрузка (Нормальный режим)
**Цель**: Имитация реального использования системы
**Параметры**:
- Пользователей: 50
- Скорость роста: 5 пользователей/сек
- Длительность: 5 минут
- Ожидаемый RPS: 15-25 запросов/сек
- Допустимые ошибки: < 1%
- Целевое время ответа: < 500ms (p95)

### Стресс-тест (Пиковая нагрузка)
**Цель**: Определение пределов производительности
**Параметры**:
- Пользователей: 200
- Скорость роста: 20 пользователей/сек
- Длительность: 3 минуты
- Ожидаемый RPS: 50-80 запросов/сек
- Определение точки деградации
- Мониторинг использования ресурсов

### Тест на стабильность (Длительная нагрузка)
**Цель**: Проверка на утечки памяти и деградацию
**Параметры**:
- Пользователей: 100
- Скорость роста: 10 пользователей/сек
- Длительность: 30 минут
- Мониторинг: память, CPU, время ответа
- Критерий успеха: стабильный RPS, отсутствие роста времени ответа

## Метрики для сравнения

### Ключевые показатели:
1. **RPS (Requests Per Second)** - пропускная способность
2. **Среднее время ответа** - общая производительность
3. **p95/p99 перцентили** - качество обслуживания
4. **Количество ошибок** - стабильность системы
5. **Момент деградации** - предельная нагрузка

### Эндпоинты для мониторинга:
1. `GET /terms/` - самый частый запрос
2. `GET /terms/{key}` - чтение конкретного термина
3. `POST /terms/` - создание (наиболее ресурсоемкий)
4. `PUT /terms/{key}` - обновление
5. `DELETE /terms/{key}` - удаление

## Запуск тестов

### Быстрый старт:
```bash
# Установка зависимостей
pip install -r requirements.txt

# Запуск приложения
python app.py

# В другом терминале - запуск тестов
locust -f locustfile.py --host=http://localhost:8000